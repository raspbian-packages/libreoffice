#!/usr/bin/env bash

bin_dir=$(dirname $0)
action=$(basename $0)

if [ "$action" = "lo_proxy_start" ] ; then
    action=$1
    shift
fi

if [ -z "$SRC_ROOT" ] ; then
   SRC_ROOT=$($bin_dir/lo_find_src_root) || exit 1
fi
if [ -z "$SOLARINC" ] ; then
    if [ -e "$SRC_ROOT/config.mk" ] ; then
        . "$SRC_ROOT/config.mk"
    fi
    if [ -e "$SRC_ROOT/Env.Host.sh" ] ; then
        . "$SRC_ROOT/Env.Host.sh"
    fi
fi

if [ -e $SRC_ROOT/solenv/bin/$action.pl ] ; then
   $SRC_ROOT/solenv/bin/$action.pl "$@"
elif [ -e $SRC_ROOT/solenv/bin/$action.sh ] ; then
   $SRC_ROOT/solenv/bin/$action.sh "$@"
else
   echo "$action.[pl|sh] not found" 2>&1
   exit 1
fi

