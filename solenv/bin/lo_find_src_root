#!/usr/bin/env bash
#
# (c) 2011  Norbert Thiebaud. License : GPLv3
#
# try to locate the SRC_ROOT based on the working directory
# we search for first Repository.mk
# in the current directoyr or its parent, all teh way to /
# Ths is a heuristic. it works 'most of the times
# but it could give false positive if you try hard enough
#

current=$(pwd)

while [  "${current}" != "/" ] ; do
    if [ -f ${current}/.src_root ] ; then
        echo "${current}"
        exit 0;
    fi
    current=$(dirname "${current}")
done

echo "Error cannot determine SRC_ROOT" 1>&2
exit 1;
